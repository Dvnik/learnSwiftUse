# ç¬¬ 10 ç«  å‹•æ…‹æ¸…å–®ã€ForEach èˆ‡è­˜åˆ¥

Class: ç²¾é€šSwiftUI
Created: December 8, 2022 4:39 PM
Reviewed: No
Type: SwiftUI4

å‹•æ…‹æ¸…å–®å°±æ˜¯è¡¨æ ¼è¦–åœ–ï¼Œæ—¢Buttonä»¥å¾Œè »å¸¸è¢«ä½¿ç”¨çš„UIå…ƒä»¶ï¼Œåœ¨`UIKit`æ˜¯ä½¿ç”¨`TableView`ã€‚åœ¨ SwiftUI ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨Â `List`Â ä»£æ›¿è¡¨æ ¼è¦–åœ–ä¾†é¡¯ç¤ºè³‡æ–™åˆ—ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨éÂ `UIKit`Â å»ºç«‹è¡¨æ ¼è¦–åœ–ï¼Œä½ æ‡‰è©²çŸ¥é“å¯¦ä½œä¸€å€‹ç°¡å–®çš„è¡¨æ ¼è¦–åœ–ï¼Œå°±éœ€è¦èŠ±ä¸€é»å·¥å¤«ã€‚è€Œè‹¥æ˜¯è¦å»ºç«‹è‡ªè¨‚ Cell ä½ˆå±€çš„è¡¨æ ¼è¦–åœ–ï¼Œå‰‡è¦åšçš„å·¥ä½œæ›´å¤šã€‚SwiftUI ç°¡åŒ–äº†æ•´å€‹éç¨‹ï¼Œåªéœ€å¹¾è¡Œç¨‹å¼ç¢¼ï¼Œä½ å°±èƒ½ä»¥è¡¨æ ¼å½¢å¼ä¾†é™³åˆ—è³‡æ–™ã€‚å³ä½¿ä½ éœ€è¦è‡ªè¨‚åˆ—çš„ä½ˆå±€ï¼Œä¹Ÿåªéœ€è¦æ¥µå°‘çš„å·¥å¤«å³å¯è¾¦åˆ°ã€‚

# ****å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸…å–®****

<aside>
ğŸ’¡ å»ºç«‹ä¸€å€‹ç·´ç¿’å°ˆæ¡ˆï¼Œåç¨±ç‚ºã€Œ`SwiftUIList`ã€(æˆ–å…¶ä»–åç¨±)

</aside>

ç¾åœ¨åœ¨æ–°å°ˆæ¡ˆçš„`ContentView.swift`æ›´æ–°ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š

```swift
struct ContentView: View {
    var body: some View {
        List {
            Text("Item 1")
            Text("Item 2")
            Text("Item 3")
            Text("Item 4")
        }
    }
}
```

ä»¥ä¸Šæ˜¯å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸…å–®æˆ–è¡¨æ ¼æ‰€éœ€è¦çš„ç¨‹å¼ç¢¼ã€‚ç•¶ä½ å°‡æ–‡å­—è¦–åœ–åµŒå…¥Â `List`Â ä¸­æ™‚ï¼Œæ¸…å–®è¦–åœ–æœƒä»¥åˆ—é¡¯ç¤ºè³‡æ–™ã€‚

ç›¸åŒçš„ç¨‹å¼ç¢¼ç‰‡æ®µå¯ä»¥ä½¿ç”¨Â `ForEach`Â ä¾†ç·¨å¯«ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
struct ContentView: View {
    var body: some View {
        List {
            ForEach(1...4, id: \.self) { index in
                Text("Item \(index)")
            }
        }
    }
}
```

ç”±æ–¼é€™äº›æ–‡å­—è¦–åœ–éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤ä½ å¯åœ¨ SwiftUI ä¸­ä½¿ç”¨Â `ForEach`Â è¿´åœˆä¾†å»ºç«‹è¦–åœ–ã€‚

> å¾å·²è­˜åˆ¥çš„åº•å±¤é›†åˆä¸­ï¼Œä¾ç…§éœ€æ±‚è¨ˆç®—è¦–åœ–çš„ä¸€ç¨®çµæ§‹ã€‚

â€” Apple [å®˜æ–¹æ–‡ä»¶](https://developer.apple.com/documentation/swiftui/foreach)
> 

<aside>
ğŸ’¡ å¯ä»¥ç«‹å³ä½¿ç”¨è¿´åœˆå»ºç«‹UIæ˜¯ä¸€å¤§ç‰¹é»ï¼ŒUIKité›–ç„¶ä¹Ÿèƒ½åšåˆ°ï¼Œä½†æ˜¯è¦è€ƒæ…®åˆ°UIçš„ä½ç½®ï¼Œä»¥åŠæ”¾åœ¨å“ªå€‹Viewçš„subåº•ä¸‹ï¼ŒåŠ ä¸Šéœ€è¦é‹è¡Œä»¥å¾Œæ‰èƒ½çœ‹åˆ°çµæœã€‚UIKitç”¨ç¨‹å¼ç¢¼å»ºç«‹UIæœƒæ¯”è¼ƒåƒåŠ›ã€‚

</aside>

`ForEach`Â å¦‚ä½•è­˜åˆ¥é›†åˆä¸­çš„æ¯å€‹é …ç›®ï¼Œåƒæ•¸Â `id`Â çš„ç›®çš„åœ¨æ–¼æ­¤ï¼Œç‚ºä»€éº¼Â `ForEach`Â éœ€è¦è­˜åˆ¥é …ç›®çš„å”¯ä¸€æ€§å‘¢ï¼Ÿ SwiftUI åŠŸèƒ½å¼·å¤§ï¼Œå¯åœ¨éƒ¨åˆ†æˆ–å…¨éƒ¨é›†åˆå…§çš„é …ç›®æ›´æ”¹æ™‚è‡ªå‹•æ›´æ–° UIï¼Œ å› æ­¤ç•¶æ›´æ–°æˆ–åˆªé™¤é …ç›®æ™‚ï¼Œéœ€è¦ä¸€å€‹è­˜åˆ¥ç¢¼ä¾†è­˜åˆ¥è©²é …ç›®ã€‚

åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘å‚³é€çµ¦Â `ForEach`Â ä¸€å€‹ç¯„åœçš„å€¼ä¾†é€ä¸€åŸ·è¡Œã€‚è©²è­˜åˆ¥ç¢¼è¨­å®šç‚ºå…¶å€¼ï¼ˆå³ 1ã€2ã€3ã€4ï¼‰ï¼Œ`index`Â åƒæ•¸å„²å­˜è¿´åœˆçš„ç›®å‰å€¼ï¼Œä¾‹å¦‚ï¼šå®ƒå¾ã€Œ1ã€é€™å€‹å€¼é–‹å§‹ï¼ŒÂ `index`Â åƒæ•¸çš„å€¼å‰‡ç‚ºã€Œ1ã€ã€‚

åœ¨é–‰åŒ…ä¸­ï¼Œå³æ˜¯æ¸²æŸ“è¦–åœ–æ‰€éœ€çš„ç¨‹å¼ç¢¼ï¼Œé€™è£¡ä¹Ÿæ˜¯æˆ‘å€‘éœ€è¦å»ºç«‹çš„æ–‡å­—è¦–åœ–ï¼Œå…¶æ•˜è¿°å°‡ä¾æ“šè¿´åœˆä¸­çš„Â `index`Â å€¼è€Œè®ŠåŒ–ã€‚å¦‚æ­¤ï¼Œä½ å°±å¯ä»¥åœ¨æ¸…å–®ä¸­å»ºç«‹å››å€‹ä¸åŒæ¨™é¡Œçš„é …ç›®ã€‚

ç›¸åŒçš„ç¨‹å¼ç¢¼ç‰‡æ®µä¹Ÿå¯ä»¥é€²ä¸€æ­¥é‡å¯«å¦‚ä¸‹ï¼š

```swift
struct ContentView: View {
    var body: some View {
        List {
            ForEach(1...4, id: \.self) {
                Text("Item \($0)")
            }
        }
    }
}
```

ä½ å¯ä»¥çœç•¥Â `index`Â åƒæ•¸ï¼Œä¸¦ä½¿ç”¨åƒæ•¸åç¨±ç¸®å¯«Â `$0`ï¼Œå®ƒè¡¨ç¤ºé–‰åŒ…çš„ç¬¬ä¸€å€‹åƒæ•¸ã€‚

<aside>
ğŸ’¡ `$0`é€™å€‹åƒæ•¸ç°¡ç•¥å¯«æ³•ï¼Œåœ¨å…¶ä»–èªè¨€ä¸Šä¹Ÿæœ‰çœ‹åˆ°ã€‚

</aside>

å¯å°‡è³‡æ–™é›†åˆç›´æ¥å‚³é€åˆ°Â `List`Â è¦–åœ–ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š

```swift
struct ContentView: View {
    var body: some View {
        List(1...4, id: \.self) {
            Text("Item \($0)")
        }
    }
}
```

åªéœ€å…©è¡Œç¨‹å¼ç¢¼ï¼Œå³å¯å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸…å–® / è¡¨æ ¼ã€‚

# ****å»ºç«‹å…·æ–‡å­—åŠåœ–ç‰‡çš„æ¸…å–®è¦–åœ–****

åœ¨å¤§å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œæ¸…å–®è¦–åœ–çš„é …ç›®çš†æœƒåŒ…å«æ–‡å­—èˆ‡åœ–ç‰‡ï¼Œè€Œä½ è©²å¦‚ä½•å¯¦ä½œå‘¢ï¼Ÿå¦‚æœä½ çŸ¥é“Â `Image`ã€`Text`ã€`VStack`Â èˆ‡Â `HStack`Â çš„ç”¨æ³•çš„è©±ï¼Œä½ æ‡‰è©²å°å¦‚ä½•å»ºç«‹å®ƒæœ‰æ¦‚å¿µäº†ã€‚

ç”¨UIKitå»ºç«‹TableViewçš„æ–¹æ³•å°±ä¸è´…è¿°ä¸€æ¬¡ï¼Œç›´æ¥ä¾†çœ‹åœ¨SwiftUIå¦‚ä½•å‘ˆç¾ã€‚

é¦–å…ˆæ˜¯åœ–ç‰‡ï¼ŒAppcodaæœ‰æä¾›ä¸€æ‰¹ç´ æï¼Œä¸€èˆ¬ä¾†èªªæ˜¯è‡ªå·±æ‰¾ç´ æï¼Œä¸‹åˆ—æ˜¯æä¾›ç´ æçš„å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼š

```swift
struct ContentView: View {

    var restaurantNames = ["Cafe Deadend", "Homei", "Teakha", "Cafe Loisl", "Petite Oyster", "For Kee Restaurant", "Po's Atelier", "Bourke Street Bakery", "Haigh's Chocolate", "Palomino Espresso", "Upstate", "Traif", "Graham Avenue Meats And Deli", "Waffle & Wolf", "Five Leaves", "Cafe Lore", "Confessional", "Barrafina", "Donostia", "Royal Oak", "CASK Pub and Kitchen"]

    var restaurantImages = ["cafedeadend", "homei", "teakha", "cafeloisl", "petiteoyster", "forkeerestaurant", "posatelier", "bourkestreetbakery", "haighschocolate", "palominoespresso", "upstate", "traif", "grahamavenuemeats", "wafflewolf", "fiveleaves", "cafelore", "confessional", "barrafina", "donostia", "royaloak", "caskpubkitchen"]

    var body: some View {
        List(1...4, id: \.self) {
            Text("Item \($0)")
        }
    }
}
```

<aside>
ğŸ’¡ æ­£å¼çš„APPä¸æœƒé€™éº¼å¯«ï¼Œå› ç‚ºæ¯å€‹é …ç›®åç¨±éƒ½è¦æ‰‹å‹•è¼¸å…¥æœƒè€—è²»å¤§é‡æ™‚é–“ã€‚

é€™ç¯„ä¾‹æ˜¯ç‚ºäº†ç­è§£Listçš„é‹ä½œè€Œå¯«ã€‚

</aside>

å…©å€‹é™£åˆ—å…·æœ‰ç›¸åŒé …ç›®æ•¸ï¼Œ`restaurantNames`é™£åˆ—å„²å­˜é¤å»³åç¨±ï¼Œ`restaurantImages`
Â è®Šæ•¸å„²å­˜ä½ å‰›åŒ¯å…¥çš„åœ–ç‰‡åç¨±ã€‚åªéœ€è¦æ›´æ–°Â `body`Â è®Šæ•¸å¦‚ä¸‹ï¼š 

```swift
var body: some View {
    List(restaurantNames.indices, id: \.self) { index in
        HStack {
            Image(self.restaurantImages[index])
                .resizable()
                .frame(width: 40, height: 40)
                .cornerRadius(5)
            Text(self.restaurantNames[index])
        }
    }
}
```

æˆ‘å€‘åšäº†ä¸€äº›ä¿®æ”¹ï¼Œé¦–å…ˆæ˜¯Â `List`Â è¦–åœ–ï¼Œæˆ‘å€‘å‚³é€é¤å»³åç¨±çš„ç¯„åœï¼ˆå³Â `restaurantNames. indices`Â ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€å€‹å›ºå®šçš„ç¯„åœã€‚ä¾‹å¦‚ï¼š`restaurantNames`Â é™£åˆ—æœ‰ 21 å€‹é …ç›®ï¼Œç¯„åœæ˜¯å¾ 0 è‡³ 20ã€‚

åœ¨é–‰åŒ…ä¸­ï¼Œç¨‹å¼ç¢¼æœƒæ›´æ–°ï¼Œä»¥å»ºç«‹åˆ—çš„ä½ˆå±€ï¼Œæˆ‘å°‡ä¸æœƒæ·±å…¥æ¢è¨ç´°ç¯€ï¼Œå› ç‚ºå¦‚æœä½ å°å †ç–Šè¦–åœ–å·²ç¶“å®Œå…¨äº†è§£ï¼Œé‚£éº¼ç¨‹å¼ç¢¼ä¸€çœ‹ä¾¿æ˜ç™½äº†ã€‚ç‚ºäº†æ›´æ”¹`List`Â è¦–åœ–çš„æ¨£å¼ï¼Œæˆ‘å€‘é™„åŠ äº†`listStyle`Â ä¿®é£¾å™¨ä¸¦å°‡æ¨£å¼è¨­ç½®ç‚º`plain`ã€‚

å°±æ˜¯é€™æ¨£ï¼Œä½¿ç”¨ä¸åˆ° 10 è¡Œçš„ç¨‹å¼ç¢¼ï¼Œæˆ‘å€‘å·²ç¶“å»ºç«‹äº†ä¸€å€‹è‡ªè¨‚ä½ˆå±€çš„æ¸…å–®ï¼ˆæˆ–è¡¨æ ¼ï¼‰ã€‚

# ****ä½¿ç”¨è³‡æ–™é›†åˆ****

æˆ‘å€‘å°‡å»ºç«‹ä¸€å€‹Â `Restaurant`Â çµæ§‹ä¾†åŠ ä»¥çµ„ç¹”è³‡æ–™ï¼Œè€Œä¸æ˜¯å°‡é¤å»³è³‡æ–™å„²å­˜åœ¨å…©å€‹å–®ç¨çš„é™£åˆ—ä¸­ã€‚é€™å€‹çµæ§‹æœ‰å…©å€‹å±¬æ€§ï¼šã€Œnameã€èˆ‡ã€Œimageã€ã€‚åœ¨Â `ContentView.swift`æª”çš„æœ€å¾Œé¢ï¼Œ æ’å…¥ä¸‹åˆ—ç¨‹å¼ç¢¼ï¼š

```swift
struct Restaurant {
    var name: String
    var image: String
}
```

ä½¿ç”¨é€™å€‹çµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥å°‡Â `restaurantNames`èˆ‡Â `restaurantImages`Â é™£åˆ—åˆä½µç‚ºä¸€å€‹é™£åˆ—ã€‚ç¾åœ¨åˆªé™¤`restaurantNames`Â èˆ‡Â `restaurantImages`Â è®Šæ•¸ï¼Œä¸¦ä»¥Â `ContentView`ä¸­çš„é€™å€‹è®Šæ•¸ä¾†ä»£æ›¿ï¼š

```swift
var restaurants = [ Restaurant(name: "Cafe Deadend", image: "cafedeadend"),
               Restaurant(name: "Homei", image: "homei"),
               Restaurant(name: "Teakha", image: "teakha"),
               Restaurant(name: "Cafe Loisl", image: "cafeloisl"),
               Restaurant(name: "Petite Oyster", image: "petiteoyster"),
               Restaurant(name: "For Kee Restaurant", image: "forkeerestaurant"),
               Restaurant(name: "Po's Atelier", image: "posatelier"),
               Restaurant(name: "Bourke Street Bakery", image: "bourkestreetbakery"),
               Restaurant(name: "Haigh's Chocolate", image: "haighschocolate"),
               Restaurant(name: "Palomino Espresso", image: "palominoespresso"),
               Restaurant(name: "Upstate", image: "upstate"),
               Restaurant(name: "Traif", image: "traif"),
               Restaurant(name: "Graham Avenue Meats And Deli", image: "grahamavenuemeats"),
               Restaurant(name: "Waffle & Wolf", image: "wafflewolf"),
               Restaurant(name: "Five Leaves", image: "fiveleaves"),
               Restaurant(name: "Cafe Lore", image: "cafelore"),
               Restaurant(name: "Confessional", image: "confessional"),
               Restaurant(name: "Barrafina", image: "barrafina"),
               Restaurant(name: "Donostia", image: "donostia"),
               Restaurant(name: "Royal Oak", image: "royaloak"),
               Restaurant(name: "CASK Pub and Kitchen", image: "caskpubkitchen")
]
```

å¦‚æœä½ æ˜¯ Swift æ–°æ‰‹ï¼Œé€™è£¡åšå€‹è§£é‡‹ï¼Œé™£åˆ—çš„æ¯ä¸€å€‹é …ç›®è¡¨ç¤ºä¸€ç­†ç‰¹å®šé¤å»³çš„ç´€éŒ„ã€‚ç•¶ä½ é€²è¡Œæ›´æ”¹å¾Œï¼Œä½ å°‡æœƒåœ¨Xcode ä¸­è¦‹åˆ°ä¸€å€‹éŒ¯èª¤ï¼Œå…¶æŒ‡å‡ºéºå¤±äº†`restaurantNames`Â è®Šæ•¸ï¼Œ é€™å¾ˆæ­£å¸¸ï¼Œå› ç‚ºæˆ‘å€‘å‰›æ‰åˆªé™¤é€™å€‹è®Šæ•¸äº†ã€‚

ç¾åœ¨æ›´æ–°Â `body`Â è®Šæ•¸å¦‚ä¸‹ï¼š

```swift
var body: some View {
    List(restaurants, id: \.name) { restaurant in
        HStack {
            Image(restaurant.image)
                .resizable()
                .frame(width: 40, height: 40)
                .cornerRadius(5)
            Text(restaurant.name)
        }
    }
    .listStyle(.plain)
}
```

çœ‹ä¸€ä¸‹æˆ‘å€‘å‚³å…¥Â `List`Â çš„åƒæ•¸ï¼Œæˆ‘å€‘æ²’æœ‰å‚³é€ç¯„åœï¼Œè€Œæ˜¯å‚³é€Â `restaurants`Â é™£åˆ—ï¼Œä¸¦å‘Šè¨´Â `List`Â ä½¿ç”¨å…¶Â `name`Â å±¬æ€§ä½œç‚ºè­˜åˆ¥ç¢¼ã€‚`List`Â å°‡é€ä¸€åŸ·è¡Œé™£åˆ—ï¼Œä¸¦è®“æˆ‘å€‘çŸ¥é“å®ƒåœ¨é–‰åŒ…ä¸­æ­£åœ¨è™•ç†çš„ç›®å‰é¤å»³ã€‚å› æ­¤ï¼Œåœ¨é–‰åŒ…ä¸­ï¼Œæˆ‘å€‘æŒ‡ç¤ºæ¸…å–®å¦‚ä½•é¡¯ç¤ºé¤å»³åˆ—ï¼Œé€™è£¡æˆ‘å€‘åªåœ¨Â `HStack`Â ä¸­åŒæ™‚é¡¯ç¤ºé¤å»³åœ–ç‰‡èˆ‡é¤å»³åç¨±ã€‚

ä¸€åˆ‡éƒ½æ²’æœ‰æ”¹è®Šï¼ŒUI ä»ç„¶ç›¸åŒï¼Œä¸éåº•å±¤ç¨‹å¼ç¢¼å·²ç¶“ä¿®æ”¹ç‚ºåˆ©ç”¨Â `List`Â èˆ‡è³‡æ–™é›†åˆäº†ã€‚

<aside>
ğŸ’¡ é€™æ¨£çš„åšæ³•æŒºæ¥è¿‘APPæœƒæ¡ç”¨çš„å½¢å¼ï¼Œå·®ç•°æ˜¯è³‡æ–™ä¾†æºä¸æœƒç›´æ¥å¯«æ­»åœ¨APPä¸­è€Œæ˜¯ç”±å…¶ä»–åœ°æ–¹æ±²å–ã€‚

</aside>

# ****éµå¾ª Identifiable å”å®š****

ç‚ºäº†è®“ä½ æ›´äº†è§£Â `List`å…§Â `id`Â åƒæ•¸çš„ç”¨é€”ï¼Œæˆ‘å€‘å°Â `restaurants`Â é™£åˆ—åšä¸€å€‹å°è®Šæ›´ã€‚ç”±æ–¼æˆ‘å€‘ä½¿ç”¨é¤å»³åç¨±ä½œç‚ºè­˜åˆ¥ç¢¼ï¼Œå› æ­¤æˆ‘å€‘ä¾†çœ‹ç•¶æœ‰å…©ç­†è³‡æ–™å…·æœ‰ç›¸åŒçš„é¤å»³åç¨±æ™‚æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿç¾åœ¨å°‡Â `restaurants`Â é™£åˆ—ä¸­çš„ã€ŒUpstateã€æ›´æ–°ç‚ºã€ŒHomeiã€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
Restaurant(name: "Homei", image: "upstate")
```

è«‹æ³¨æ„ï¼Œæˆ‘å€‘åªæ›´æ”¹ã€Œnameã€å±¬æ€§å€¼ï¼Œåœ–ç‰‡ä»ä¿æŒç‚ºÂ `upstate`ã€‚å†æ¬¡æª¢æŸ¥é è¦½ç•«å¸ƒï¼Œçœ‹çœ‹ä½ å¾—åˆ°äº†ä»€éº¼ã€‚

æˆ‘å€‘ç¾åœ¨æœ‰å…©ç­†åç¨±æ˜¯ã€ŒHomeiã€çš„ç´€éŒ„ã€‚ä½ å¯èƒ½å¸Œæœ›ç¬¬äºŒç­†ã€ŒHomeiã€ç´€éŒ„æœƒé¡¯ç¤º upstate åœ–ç‰‡ï¼Œä½†å¯¦éš›ä¸Šï¼ŒiOS æœƒä»¥ç›¸åŒçš„æ–‡å­—èˆ‡åœ–ç‰‡ä¾†æ¸²æŸ“é€™å…©ç­†ç´€éŒ„ã€‚åœ¨ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘å‘Šè¨´Â `List`ä½¿ç”¨é¤å»³åç¨±ä½œç‚ºå”¯ä¸€çš„è­˜åˆ¥ç¢¼ï¼Œç•¶å…©é–“é¤å»³çš„åç¨±ç›¸åŒæ™‚ï¼ŒiOS æœƒå°‡é€™å…©é–“é¤å»³è¦–ç‚ºåŒä¸€é¤å»³ï¼Œå› æ­¤å®ƒé‡ç”¨ç›¸åŒçš„è¦–åœ–ï¼Œä¸¦æ¸²æŸ“ç›¸åŒçš„åœ–ç‰‡ã€‚

é‚£éº¼ï¼Œä½ è©²å¦‚ä½•ä¿®æ­£é€™å€‹å•é¡Œå‘¢ï¼Ÿ

å…¶å¯¦éå¸¸ç°¡å–®ï¼Œä½ æ‡‰è©²çµ¦æ¯é–“é¤å»³ä¸€å€‹å”¯ä¸€çš„è­˜åˆ¥ç¢¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨åç¨±ä½œç‚º IDã€‚ç¾åœ¨æ›´æ–°Â `Restaurant`Â çµæ§‹å¦‚ä¸‹ï¼š

```swift
struct Restaurant {
    var id = UUID()
    var name: String
    var image: String
}
```

åœ¨ä¸Šåˆ—çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘åŠ å…¥äº†Â `id`Â å±¬æ€§ï¼Œä¸¦ä»¥å”¯ä¸€è­˜åˆ¥ç¢¼ä¾†åˆå§‹åŒ–å®ƒã€‚é€™å€‹Â `UUID()`å‡½æ•¸çš„ä½œç”¨æ˜¯ç”¢ç”Ÿé€šç”¨å”¯ä¸€çš„éš¨æ©Ÿè­˜åˆ¥ç¢¼ï¼ŒUUID æ˜¯ç”±128 ä½å…ƒæ•¸æ‰€çµ„æˆï¼Œå› æ­¤ç†è«–ä¸Šè¦åŒæ™‚ç”¢ç”Ÿå…©å€‹ç›¸åŒè­˜åˆ¥ç¢¼çš„æ©Ÿç‡å¹¾ä¹ç‚ºé›¶ã€‚

ç¾åœ¨ï¼Œæ¯é–“é¤å»³æ‡‰è©²çš†æœ‰ä¸€å€‹å”¯ä¸€çš„ IDï¼Œä½†æ˜¯åœ¨ä¿®æ­£é€™å€‹éŒ¯èª¤ä¹‹å‰ï¼Œæˆ‘å€‘é‚„éœ€è¦å†åšä¸€å€‹ä¿®æ”¹ã€‚å°æ–¼Â `List`ï¼Œå°‡Â `id`Â åƒæ•¸çš„å€¼å¾Â `\.name`æ”¹ç‚ºÂ `\.id`ï¼š

```swift
List(restaurants, id: \.id)
```

é€™å‘Šè¨´Â `List`è¦–åœ–ä½¿ç”¨é¤å»³çš„Â `id`Â å±¬æ€§ä½œç‚ºå”¯ä¸€çš„è­˜åˆ¥ç¢¼ã€‚å†çœ‹ä¸€éé è¦½ï¼Œç¬¬äºŒç­†çš„ã€ŒHomeiã€ç´€éŒ„æ‡‰è©²é¡¯ç¤ºå®ƒè‡ªå·±çš„åœ–ç‰‡äº†

é€éè®“Â `Restaurant`Â çµæ§‹éµå¾ªÂ `Identifiable`Â å”å®šï¼Œæˆ‘å€‘å¯é€²ä¸€æ­¥ç°¡åŒ–ç¨‹å¼ç¢¼ã€‚é€™å€‹å”å®šåªæœ‰ä¸€å€‹è¦æ±‚ï¼Œå°±æ˜¯å¯¦ä½œå”å®šçš„å‹åˆ¥æ‡‰è©²å…·å‚™æŸç¨®Â `id`Â ä½œç‚ºå”¯ä¸€è­˜åˆ¥ç¢¼ã€‚ç¾åœ¨æ›´æ–°Â `Restaurant` ä¾†å¯¦ä½œÂ `Identifiable`Â å”å®šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
struct Restaurant: Identifiable {
    var id = UUID()
    var name: String
    var image: String
}
```

ç”±æ–¼Â `Restaurant`Â å·²ç¶“æä¾›äº†å”¯ä¸€çš„Â `id`Â å±¬æ€§ï¼Œå› æ­¤ç¬¦åˆå”å®šçš„è¦æ±‚ã€‚

é‚£éº¼ï¼Œé€™è£¡å¯¦ä½œÂ `Identifiable`Â å”å®šçš„ç›®çš„æ˜¯ä»€éº¼å‘¢ï¼Ÿå®ƒå¯ä»¥é€²ä¸€æ­¥ç¯€çœä¸€äº›ç¨‹å¼ç¢¼ï¼Œç•¶Â `Restaurant`Â çµæ§‹éµå¾ªÂ `Identifiable`Â å”å®šæ™‚ï¼Œä½ å¯ä¸ä½¿ç”¨Â `id`Â åƒæ•¸ä¾†åˆå§‹åŒ–é€™å€‹Â `List`ï¼Œæ›´æ–°å¾Œçš„æ¸…å–®è¦–åœ–ç¨‹å¼ç¢¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
List(restaurants) { restaurant in
    HStack {
        Image(restaurant.image)
            .resizable()
            .frame(width: 40, height: 40)
            .cornerRadius(5)
        Text(restaurant.name)
    }
    .listStyle(.plain)
}
```

é€™å°±æ˜¯ä½¿ç”¨Â `List`Â é¡¯ç¤ºè³‡æ–™é›†åˆçš„æ–¹å¼ã€‚

<aside>
ğŸ’¡ Listå¸¶å…¥çš„åƒæ•¸æ˜¯éµå¾ª`SelectionValue`çš„å‹æ˜¯åœ¨å¸¶å…¥é …ç›®çµæ§‹ï¼Œå¦‚æœæ²’æœ‰ç¹¼æ‰¿`Identifiable`å”å®šï¼Œå°±è¦ä½¿ç”¨`id`Â åƒæ•¸ä¾†åˆå§‹åŒ–é€™å€‹Â `List`ï¼Œè©²å”å®šå°±æ˜¯ç‚ºäº†ç°¡åŒ–Listçš„åšæ³•ã€‚

</aside>

## ****é‡æ§‹ç¨‹å¼ç¢¼****

ç¨‹å¼ç¢¼é‹ä½œæ­£å¸¸ï¼Œä¸éå°‡ç¨‹å¼ç¢¼é‡æ§‹ï¼Œè®“å®ƒè®Šå¾—æ›´å¥½ï¼Œå§‹çµ‚æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä½ å·²ç¶“å­¸éå¦‚ä½•å–å‡ºè¦–åœ–ï¼Œç¾åœ¨æˆ‘å€‘å°‡å–å‡ºÂ `HStack`Â è‡³ä¸€å€‹å–®ç¨çš„çµæ§‹ä¸­ã€‚æŒ‰ä½éµä¸æ”¾ï¼Œ ä¸¦é»æ“ŠÂ `HStack`ï¼Œ é¸æ“‡ã€ŒExtract subviewã€ä¾†å–å‡ºç¨‹å¼ç¢¼ï¼Œ ä¸¦å°‡çµæ§‹é‡æ–°å‘½åç‚ºÂ `BasicImageRow`ã€‚

ç•¶ä½ æ›´æ”¹å¾Œï¼ŒXcode æœƒç«‹å³é¡¯ç¤ºä¸€å€‹éŒ¯èª¤ã€‚ç”±æ–¼å–å‡ºçš„å­è¦–åœ–æ²’æœ‰Â `restaurant`
Â å±¬æ€§ï¼Œå› æ­¤åƒé€™æ¨£æ›´æ–°`BasicImageRow`çµæ§‹ï¼Œä»¥å®£å‘ŠÂ `restaurant`Â å±¬æ€§ï¼š

```swift
struct BasicImageRow: View {
    var restaurant: Restaurant

    var body: some View {
        HStack {
            Image(restaurant.image)
                .resizable()
                .frame(width: 40, height: 40)
                .cornerRadius(5)
            Text(restaurant.name)
        }
    }
}
```

æ¥è‘—ï¼Œæ›´æ–°Â `List`Â è¦–åœ–ä¾†å‚³é€Â `restaurant`Â åƒæ•¸ï¼š

```swift
List(restaurants) { restaurant in
    BasicImageRow(restaurant: restaurant)
}

```

ç¾åœ¨ä¸€åˆ‡éƒ½æ‡‰è©²æ­£å¸¸é‹ä½œã€‚é€™å€‹æ¸…å–®è¦–åœ–æ¸²æŸ“å¾Œçœ‹èµ·ä¾†ä»ç„¶ç›¸åŒï¼Œä¸éåº•å±¤çš„ç¨‹å¼ç¢¼æ›´å…·æ˜“è®€æ€§èˆ‡çµ„ç¹”æ€§ï¼Œè€Œä¸”æ›´å®¹æ˜“ä¿®æ”¹ç¨‹å¼ç¢¼ã€‚ä¾‹å¦‚ï¼šä½ å°‡åˆ—å»ºç«‹ç‚ºå…¶ä»–ä½ˆå±€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
struct FullImageRow: View {
    var restaurant: Restaurant

    var body: some View {
        ZStack {
            Image(restaurant.image)
                .resizable()
                .aspectRatio(contentMode: .fill)
                .frame(height: 200)
                .cornerRadius(10)
                .overlay(
                    Rectangle()
                        .foregroundColor(.black)
                        .cornerRadius(10)
                        .opacity(0.2)
                )

            Text(restaurant.name)
                .font(.system(.title, design: .rounded))
                .fontWeight(.black)
                .foregroundColor(.white)
        }
    }
}
```

é€™å€‹åˆ—ä½ˆå±€æ˜¯ç”¨æ–¼é¡¯ç¤ºæ›´å¤§çš„é¤å»³åœ–ç‰‡ï¼Œä¸¦å°‡é¤å»³åç¨±ç–Šåœ¨ä¸Šé¢ã€‚ç”±æ–¼æˆ‘å€‘å·²ç¶“é‡æ§‹ç¨‹å¼ç¢¼ï¼Œå› æ­¤éå¸¸å®¹æ˜“è®Šæ›´ Appï¼Œä¾†ä½¿ç”¨æ–°çš„ä½ˆå±€ï¼Œä½ åªéœ€è¦åœ¨Â `List`Â é–‰åŒ…ä¸­ï¼Œå°‡Â `BasicImageRow`Â æ”¹æˆÂ `FullImageRow`Â å³å¯ï¼š

```swift
List(restaurants) { restaurant in
    FullImageRow(restaurant: restaurant)
}
```

å¯ä»¥é€²ä¸€æ­¥æ··åˆåˆ—ä½ˆå±€ï¼Œ ä»¥å»ºç«‹æ›´æœ‰è¶£çš„ UIã€‚èˆ‰ä¾‹è€Œè¨€ï¼Œ æ–°çš„è¨­è¨ˆæ˜¯ä½¿ç”¨Â `FullImageRow`
Â ä¾†é¡¯ç¤ºå‰å…©åˆ—çš„è³‡æ–™ï¼Œå…¶é¤˜çš„åˆ—å‰‡åˆ©ç”¨Â `BasicImageRow`ã€‚ä½ å¯ä»¥æ›´æ–°Â `List`Â å¦‚ä¸‹ï¼š

```swift
List {
    ForEach(restaurants.indices, id: \.self) { index in
        if (0...1).contains(index) {
            FullImageRow(restaurant: self.restaurants[index])
        } else {
            BasicImageRow(restaurant: self.restaurants[index])
        }
    }
}
.listStyle(.plain)
```

ç”±æ–¼æˆ‘å€‘éœ€è¦æª¢ç´¢åˆ—ç´¢å¼•ï¼Œå› æ­¤æˆ‘å€‘å‘Â `List`Â å‚³é€é¤å»³è³‡æ–™çš„ç¯„åœã€‚åœ¨é–‰åŒ…ä¸­ï¼Œæˆ‘å€‘æª¢æŸ¥Â `index`
Â çš„å€¼ä¾†æ±ºå®šè¦ä½¿ç”¨å“ªä¸€ç¨®åˆ—ä½ˆå±€ã€‚

## ****æ›´æ”¹è¡Œåˆ†éš”ç¬¦çš„é¡è‰²****

å¾ iOS 15 é–‹å§‹ï¼ŒApple ç‚ºé–‹ç™¼äººå“¡æä¾›äº†è‡ªå®šç¾©åˆ—è¡¨è¦–åœ–å¤–è§€çš„é¸é …ã€‚ è¦æ›´æ”¹è¡Œåˆ†éš”ç¬¦çš„è‰²èª¿é¡è‰²ï¼Œå¯ä»¥ä½¿ç”¨Â `listRowSeparatorTint`Â ä¿®é£¾ç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```swift
List(restaurants) { restaurant in
    ForEach(restaurants.indices, id: \.self) { index in
        if (0...1).contains(index) {
            FullImageRow(restaurant: self.restaurants[index])
        } else {
            BasicImageRow(restaurant: self.restaurants[index])
        }
    }
    .listRowSeparatorTint(.green)
}
.listStyle(.plain)
```

åœ¨ä»¥ä¸Šçš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘å°‡è¡Œåˆ†éš”ç¬¦çš„é¡è‰²æ›´æ”¹ç‚ºç¶ è‰²ã€‚

## ****éš±è—åˆ—è¡¨åˆ†éš”ç·š****

iOS 15 å¼•å…¥äº†å…¶ä¸­ä¸€å€‹æœ€å—æœŸå¾…çš„ List åŠŸèƒ½ã€‚ ä½ çµ‚æ–¼å¯ä»¥ä½¿ç”¨Â `listRowSeparator`
Â ä¿®é£¾å™¨ä¸¦å°‡å…¶å€¼è¨­ç½®ç‚ºÂ `.hidden`Â ä»¥éš±è—åˆ†éš”ç·šã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹ï¼š

```swift
List {
    ForEach(restaurants.indices) { index in
        if (0...1).contains(index) {
            FullImageRow(restaurant: self.restaurants[index])
        } else {
            BasicImageRow(restaurant: self.restaurants[index])
        }
    }

    .listRowSeparator(.hidden)
}
.listStyle(.plain)
```

`listRowSeparator`Â ä¿®é£¾å™¨æ‡‰è©²åµŒå…¥åœ¨Â `List`Â è¦–åœ–ä¸­ã€‚ è¦ä½¿åˆ—è¡¨åˆ†éš”ç·šå†æ¬¡å‡ºç¾ï¼Œä½ å¯ä»¥å°‡ä¿®é£¾å™¨çš„å€¼è¨­ç½®ç‚º`.visible`ã€‚ åˆæˆ–è€…ä½ å¯ä»¥ç°¡å–®åœ°åˆªé™¤Â `listRowSeparator`Â ä¿®é£¾å™¨ã€‚

å¦‚æœä½ æƒ³å°åˆ—è¡¨åˆ†éš”ç·šé€²è¡Œæ›´ç²¾ç´°çš„æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨`.listRowSeparator`ä¿®é£¾å™¨å…§çš„Â `edges`åƒæ•¸ã€‚ æ¯”å¦‚èªªï¼Œå¦‚æœä½ æƒ³è®“åˆ†éš”ç·šä¿æŒåœ¨åˆ—è¡¨è¦–åœ–çš„é ‚éƒ¨ï¼Œä½ å¯ä»¥é€™æ¨£å¯«ç¨‹å¼ç¢¼ï¼š

```swift
.listRowSeparator(.hidden, edges: .bottom)
```

# ****è‡ªå®šç¾©æ»¾å‹•å€åŸŸçš„èƒŒæ™¯****

åœ¨ iOS 16 ä¸­ï¼Œä½ å¯ä»¥è‡ªå®šç¾©åˆ—è¡¨è¦–åœ–çš„å¯æ»¾å‹•å€åŸŸçš„é¡è‰²ã€‚ åªéœ€å°‡Â `scrollContentBackground`
Â ä¿®é£¾ç¬¦é™„åŠ åˆ°Â `List`Â è¦–åœ–ä¸¦å°‡å…¶è¨­ç½®ç‚ºæ‚¨å–œæ­¡çš„é¡è‰²ã€‚ é€™æ˜¯ä¸€å€‹ä¾‹å­ï¼š

```swift
List(restaurants) { restaurant in
    .
    .
    .
}
.scrollContentBackground(Color.yellow)
```

é™¤äº†ä½¿ç”¨ç´”è‰²ä¹‹å¤–ï¼Œä½ é‚„å¯ä»¥ä½¿ç”¨åœ–åƒä½œç‚ºèƒŒæ™¯ã€‚ æ›´æ–°é€™æ¨£çš„ç¨‹å¼ç¢¼è©¦è©¦ï¼š

```swift
List(restaurants) { restaurant in
    .
    .
    .
}
.background {
    Image("homei")
        .resizable()
        .scaledToFill()
        .clipped()
}
.scrollContentBackground(Color.clear)
```

æˆ‘å€‘ä½¿ç”¨`background`ä¿®é£¾ç¬¦ä¾†è¨­ç½®èƒŒæ™¯åœ–ç‰‡ï¼Œ ç„¶å¾Œæˆ‘å€‘å°‡Â `scrollContentBackground`
Â ä¿®é£¾ç¬¦è¨­ç½®ç‚ºÂ `Color.clear`Â ä»¥ä½¿å¯æ»¾å‹•å€åŸŸé€æ˜ã€‚

<aside>
ğŸ’¡ `scrollContentBackground`åªèƒ½å¸¶å…¥Visibilityåƒæ•¸ï¼Œä¸çŸ¥ç‚ºä½•é€™æ®µå¯«æˆåƒæ˜¯å¯ä»¥è‡ªè¨‚é¡è‰²ä¸€èˆ¬ï¼Œ[å®˜æ–¹æ–‡ä»¶](https://developer.apple.com/documentation/swiftui/text/scrollcontentbackground(_:))ã€‚

</aside>

# çµèª

è—‰ç”±Listè¦–åœ–å±•ç¤ºSwiftUIå¯ä»¥ç”¨è¿´åœˆä¾†è£½ä½œUIçš„ä¾¿åˆ©æ€§ï¼Œä»¥åŠ****Identifiableå”å®šé¡ä¼¼TableViewçš„IndexPathæ§åˆ¶é …ç›®çš„å”¯ä¸€é¸é …ï¼Œç›®å‰çœ‹ä¾†æ˜¯ç”¨ä¸åˆ°Delegateæ©Ÿåˆ¶ï¼Œå¯æ˜¯è¡¨æ ¼é …ç›®é‚„æ˜¯å¾—è¿½è¹¤æ‰èƒ½å–å‡ºæ­£ç¢ºçš„åˆ—è¡¨ï¼Œæ‰€ä»¥Identifiableå°±æ˜¯è§£æ±ºé€™å€‹çš„å•é¡Œå§ã€‚****